<app-modal class="modal_chucnang__wrapper show" id="cntt_quanlytintuc">
    <div (click)="closeModal('cntt_quanlytintuc')" class="modal_chucnang__close mdi mdi-chevron-left text-white"></div>
    <div class="container-fluid mt-3">
        <form [formGroup]="tinTucForm" (ngSubmit)="onSubmit()">
            <div class="row">
                <div class="col-12">
                    <h1 class="text-center text-white">Chỉnh sửa bài viết</h1>
                </div>
                <div class="col-12">
                    <div class="modal_chucnang__box border rounded p-4 mt-5 bg-white">
                        <div class="row justify-content-center align-items-center">
                            <div class="col-4">
                                <div class="form-group">
                                    <label>Loại bài viết</label>
                                    <select class="custom-select form-control"
                                        (change)="chonLoaiBaiViet($event.target.value)" formControlName="loaiBaiViet">
                                        <option value="">chọn Loại bài viết</option>
                                        <option *ngFor="let LoaiBaiViet of loaiBaiViet" value="{{LoaiBaiViet}}">
                                            {{LoaiBaiViet}}
                                        </option>
                                    </select>
                                    <div class="invalid-feedback"
                                        *ngIf="submitted && myForm.loaiBaiViet.errors?.required">
                                        Vui lòng chọn loại bài viết.
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Loại danh mục</label>
                                    <select class="custom-select form-control"
                                        (change)="chonMaDanhMuc($event.target.value)" formControlName="maDanhMuc">
                                        <option value="">chọn Loại danh mục</option>
                                        <option *ngFor="let MaDanhMuc of maDanhMuc" value="{{MaDanhMuc}}">{{MaDanhMuc}}
                                        </option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Ảnh đại diện bài viết</label>
                                    <div class="input-group ">
                                        <div class="custom-file file-upload">
                                            <input type="file" class="custom-file-input" id="" aria-describedby=""
                                                name="image" ng2FileSelect [uploader]="uploader"
                                                accept="image/x-png,image/gif,image/jpeg">
                                            <label class="custom-file-label" for=""></label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label>Tiêu đề bài viết</label>
                                    <input class="form-control" type="text" formControlName="tieuDe">
                                    <div class="invalid-feedback" *ngIf="submitted && myForm.tieuDe.errors?.required">
                                        Vui lòng điển tiêu đề bài viết.
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Mô tả ngắn cho bài viết</label>
                                    <input class="form-control" type="text" formControlName="moTaNgan">
                                    <div class="invalid-feedback" *ngIf="submitted && myForm.moTaNgan.errors?.required">
                                        Vui lòng điển mô tả ngắn.
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Trạng thái bài viết</label>
                                    <select class="custom-select form-control"
                                        (change)="chonTrangThai($event.target.value)" formControlName="trangThai">
                                        <option value="0">Đã xóa</option>
                                        <option value="1">Đã đăng</option>
                                        <option value="2">Chờ phê duyệt</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="form-group">
                                    <div class="modal_chucnang__group__button mb-5">
                                        <label>Thông báo khẩn cấp</label>
                                        <select class="custom-select form-control"
                                            (change)="chonThongBaoKhanCap($event.target.value)"
                                            formControlName="thongBaoKhanCap">
                                            <option value="true">Áp dụng</option>
                                            <option value="false">Hủy áp dụng</option>
                                        </select>
                                    </div>
                                    <div class="modal_chucnang__group__button">
                                        <button class="modal_chucnang__button btn btn-outline-primary px-4 mx-2"
                                            type="submit" (click)="uploader.uploadAll()"><img
                                                class="modal_chucnang__button__icon mb-2" src="assets/img/icons/add.png"
                                                alt="image icon">
                                            <div>Thêm mới</div>
                                        </button>
                                        <button class="modal_chucnang__button btn btn-outline-danger px-4 mx-2"
                                            type="reset"><img class="modal_chucnang__button__icon mb-2"
                                                src="assets/img/icons/error.png" alt="image icon">
                                            <div>Huỷ</div>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="modal_chucnang__box border rounded p-4 mt-5 bg-white">
                        <div class="form-group">
                            <label>Nội dung tin tức</label>
                            <ckeditor [editor]="Editor" [(ngModel)]="editorValue" formControlName="noiDung"></ckeditor>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="row">
            <div class="col-12">
                <h1 class="text-center text-white">Quản lý Tin tức</h1>
            </div>
            <div class="col-12">
                <div class="modal_chucnang__box border rounded p-4 mt-5 bg-white">
                    <div class="d-flex align-items-center mb-2">
                        <label class="mb-0 d-flex align-items-center"><span class="text-nowrap">Hiển thị &nbsp;</span>
                            <p *ngIf="TinTuc.length <= 0" class="no-data text-center">Không có tin tức!</p>
                            <select class="custom-select custom-select-sm form-control">
                                <option>10</option>
                                <option>25</option>
                                <option>50</option>
                            </select><span class="text-nowrap">&nbsp; hàng</span>
                        </label>
                        <label class="ml-auto mb-0 d-flex align-items-center"><span class="text-nowrap">Tìm kiếm:
                                &nbsp;</span>
                            <input class="form-control form-control-sm" placeholder="Tìm kiếm">
                        </label>
                    </div>
                    <table class="modal_chucnang__table table table-hover row-border hover" id="">
                        <thead class="bg__caothang text-white">
                            <th class="text-center" scope="col" style="max-width: 100px">Mã bài viết</th>
                            <th scope="col">Loại bài viết</th>
                            <th scope="col">Loại danh mục</th>
                            <th scope="col">Tiêu đề bài viết</th>
                            <th scope="col">Mô tả ngắn</th>
                            <th scope="col">Nội dung</th>
                            <th scope="col">Ảnh bìa</th>
                            <th scope="col">Người viết</th>
                            <th scope="col">Thông báo khẩn cấp</th>
                            <th scope="col">Trạng thái</th>
                            <th class="text-center" scope="col"><span
                                    class="modal_chucnang__button__save mdi mdi-content-save-outline mdi-24px"></span>
                            </th>
                        </thead>
                        <tfoot class="d-none">
                            <tr>
                                <td style="max-width: 100px">
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                                <td>
                                    <input class="form-control">
                                </td>
                            </tr>
                        </tfoot>
                        <tbody>
                            <tr *ngFor="let tintuc of TinTuc; let i = index">
                                <td style="max-width: 100px">
                                    <input class="form-control" disabled value="{{tintuc.maBaiViet}}">
                                </td>
                                <td>
                                    <input class="form-control" disabled value="{{tintuc.loaiBaiViet}}">
                                </td>
                                <td>
                                    <input class="form-control" disabled value="{{tintuc.maDanhMuc}} ">
                                </td>
                                <td>
                                    <input class="form-control" disabled value="{{tintuc.tieuDe}} ">
                                </td>
                                <td>
                                    <input class="form-control" disabled value="{{tintuc.moTaNgan}} ">
                                </td>
                                <td>
                                    <input class="form-control" disabled value=" {{tintuc.noiDung}} ">
                                </td>
                                <td>
                                    <img class="modal_chucnang__button__icon mb-2" src="{{tintuc.anhDaiDien}}"
                                        alt="image icon">
                                </td>
                                <td>
                                    <input class="form-control" disabled value="{{tintuc.nguoiViet}}">
                                </td>
                                <td>
                                    <input class="form-control" disabled value="{{tintuc.thongBaoKhanCap}}">
                                </td>
                                <td>
                                    <input class="form-control" disabled value="{{tintuc.trangThai}} ">
                                </td>
                                <td class="text-center">
                                    <span
                                        class="modal_chucnang__button__edit mdi mdi-file-document-edit-outline mdi-24px"
                                        (click)="editBaiViet(tintuc)"></span>
                                    <span class="modal_chucnang__button__delete mdi mdi-delete-outline mdi-24px"></span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</app-modal>